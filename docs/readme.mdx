---
name: Rifm
---

import { Playground, PropsTable } from 'docz'
import { Value } from 'react-powerplug';
import { Rifm } from '../src'
import { numberFormat, currencyFormat } from './format';
import TextField from '@material-ui/core/TextField';
import { css } from 'emotion';



## Simple number format

<Playground>
  <Value initial={''}>
    {text => (
      <Rifm
        value={text.value}
        onChange={text.set}
        format={numberFormat}
      >
        {({ value, onChange }) => (
          <input value={value} onChange={onChange} className={css({textAlign:"right"})}/>
        )}
      </Rifm>
    )}
  </Value>
</Playground>

## Number format with fractional part

<Playground>
  <Value initial={''}>
    {text => (
      <Rifm
        refuse={/[^\d.]/ig}
        value={text.value}
        onChange={text.set}
        format={currencyFormat}
      >
        {({ value, onChange }) => (
          <input value={value} onChange={onChange} className={css({textAlign:"right"})}/>
        )}
      </Rifm>
    )}
  </Value>
</Playground>

By default all non digit symbols are refused to enter,
property `refuse` allows you to change this behaviour.
In later example "." is also added to `refuse` so input will accept `.` and allows you to split numbers.


Where `numberFormat` and `currencyFormat` are

```javascript
export const numberFormat = (str: string) => {
  const r = parseInt(str.replace(/[^\d]+/gi, ''), 10);
  return r ? r.toLocaleString('en') : '';
};

export const currencyFormat = (str: string) => {
  const clean = str.replace(/[^\d.]+/gi, '');
  const restoreDigits =
    clean.length > 2 && clean.indexOf('.') === -1
      ? `${clean.substr(0, clean.length - 2)}.${clean.substr(-2)}`
      : clean;
  const r = parseFloat(restoreDigits);
  return r
    ? r.toLocaleString('de-CH', {
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
      })
    : '';
};

```


## Material UI

<Playground>
  <Value initial={''}>
    {text => (
      <Rifm
        refuse={/[^\d.]/ig}
        value={text.value}
        onChange={text.set}
        format={currencyFormat}
      >
        {({ value, onChange }) => (
          <TextField value={value} onChange={onChange} className={css({input: {textAlign:"right"}})}/>
        )}
      </Rifm>
    )}
  </Value>
</Playground>
